<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ–±–±–∏</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–Ω–µ—à–Ω–∏–π CSS -->
    <link rel="stylesheet" href="/static/style.css">
    <!-- –ö–∞—Ä—Ç–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –¥–ª—è Three.js -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.128.0/build/three.module.js"
        }
      }
    </script>
    <!-- Socket.IO –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω –î–û lobby.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è 3D-—Å—Ü–µ–Ω—ã -->
    <div id="canvas-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;"></div>

    <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–≤–µ—Ä—Ö 3D -->
    <div class="ui-overlay">
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <div class="top-bar">
            <h1 id="lobby-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h1>
            <button class="btn btn-secondary" onclick="leaveLobby()">–ü–æ–∫–∏–Ω—É—Ç—å –ª–æ–±–±–∏</button>
        </div>

        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: —á–∞—Ç -->
        <div class="chat-panel">
            <div class="panel-header">–ß–∞—Ç</div>
            <div id="chat" class="chat-messages"></div>
            <div class="chat-input-area">
                <input type="text" id="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                <button class="btn btn-primary" onclick="sendMessage()">‚Üí</button>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ -->
        <div class="right-panel">
            <div class="panel-header">–£—á–∞—Å—Ç–Ω–∏–∫–∏</div>
            <ul id="participants-list" class="participants-list"></ul>

            <div class="panel-header" style="margin-top: 15px;">–í–∞—à–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏</div>
            <div class="character-selector">
                <select id="character-select" class="character-select">
                    <option value="">-- –≤—ã–±–µ—Ä–∏—Ç–µ --</option>
                </select>
                <button class="btn btn-primary btn-sm" onclick="selectCharacter()">–í—ã–±—Ä–∞—Ç—å</button>
            </div>

            <div class="panel-header" style="margin-top: 15px;">–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –≤ –ª–æ–±–±–∏</div>
            <div id="characters-list" class="characters-list"></div>
        </div>

        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ–π -->
        <div class="map-tools">
            <div class="marker-types">
                <button class="marker-btn red" onclick="setMarkerType('default')">üî¥</button>
                <button class="marker-btn blue" onclick="setMarkerType('blue')">üîµ</button>
                <button class="marker-btn green" onclick="setMarkerType('green')">üü¢</button>
                <span>–¢–∏–ø: <span id="current-marker-type">default</span></span>
            </div>
            <button class="btn btn-primary" onclick="addMarkerAtCenter()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫—É</button>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ª–æ–±–±–∏ (–º–æ–¥—É–ª—å) -->
    <script type="module" src="/static/lobby.js"></script>
</body>
</html>